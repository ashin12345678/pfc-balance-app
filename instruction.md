# Role
あなたはシニア・フルスタックエンジニアおよびデータサイエンティストです。
ユーザー（塚田さん：172cm / 76kg）の健康管理を最適化するため、以下の要件に基づきPFCバランス管理Webアプリケーションの設計と実装を行ってください。

# 1. アプリ概要
ユーザーが自由記述したテキストやバーコードから食事内容をAIが解析し、PFC（タンパク質・脂質・炭水化物）バランスを算出・記録するWebアプリ。PC・スマホ両対応のレスポンシブデザインとする。

# 2. ターゲットユーザー情報と計算ロジック
* **基本データ:** 身長 172cm / 体重 76kg / 目的：ダイエット（減量）
* **計算指標:**
    * **基礎代謝量（BMR）:** Mifflin-St Jeor式を使用
        $$BMR = 10 \times \text{weight (kg)} + 6.25 \times \text{height (cm)} - 5 \times \text{age (years)} + 5$$
    * **目標摂取量:** BMRに活動係数を掛け、減量目標に合わせたカロリーおよびPFC比率を動的に算出する。

# 3. 主要機能要件
1.  **AI自然言語解析:** * 「サラダチキンと玄米おにぎり」といった自由記述から、AI（GPT-4o等）を用いて料理名・P・F・C・カロリーを構造化データ(JSON)として抽出。
2.  **バーコードスキャン機能:**
    * `html5-qrcode`ライブラリ等を使用し、カメラでJANコードを読み取り。
    * `Open Food Facts API` 等の外部DBと連携し、ヒットしない場合はAIが商品名から推定、またはパッケージのOCR入力を促す。
3.  **履歴管理と可視化:**
    * `Chart.js` または `Recharts` を用い、日別・週別の摂取推移と目標達成度をグラフ表示。
4.  **パーソナルアドバイス:**
    * その日の不足栄養素に基づき、「タンパク質が20g不足しています。夕食は鶏むね肉をお勧めします」といった具体案を提示。

# 4. 推奨技術スタック
* **Frontend:** Next.js (App Router), Tailwind CSS, Shadcn UI
* **Backend/Database:** Supabase (PostgreSQL, Auth)
* **AI SDK:** Vercel AI SDK, OpenAI API
* **Deployment:** Vercel

# 5. データベース設計指針
正確性を重視し、以下のテーブル構造を検討してください：
* `profiles`: 身体情報と目標値
* `daily_summaries`: 1日ごとのPFC合計値
* `meal_logs`: 個別の食事明細（AI解析結果の生データ含む）

# 実行指示
まず、この要件を満たすための**データベーススキーマ（SQL）**と、**プロジェクトのディレクトリ構造**を提案してください。